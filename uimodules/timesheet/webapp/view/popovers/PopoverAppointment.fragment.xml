<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <ResponsivePopover showHeader="false" class="sapUiContentPadding" placement="Auto" afterClose="onAppointmentPopoverClose">
        <content>


            <VBox visible="{=${PopoverControl>/mode} !== 'DRAGGED'}">
                <TimePicker change="onTimeChange($event, 'START')" support2400="true" dateValue="{PopoverControl>/startDate}" formatPattern="mm:ss" minutesStep="15" />
                <TimePicker change="onTimeChange($event, 'END')" support2400="true" dateValue="{PopoverControl>/endDate}" formatPattern="mm:ss" minutesStep="15"/>
            </VBox>

            <!-- Date/Time Display Mode when Appointment is dragged -->
            <HBox visible="{=${PopoverControl>/mode} === 'DRAGGED'}">
                <Text class="sapUiTinyMarginEnd" text="{path:'PopoverControl>/startDate',type:'sap.ui.model.type.Date',formatOptions:{pattern:'HH:mm',UTC:false}}"/>
                <Text class="sapUiTinyMarginEnd" text="to" />
                <Text class="sapUiTinyMarginEnd" text="{path:'PopoverControl>/endDate',type:'sap.ui.model.type.Date',formatOptions:{pattern:'HH:mm',UTC:false}}"/>
            </HBox>

            <!-- Tree based Project Selection -->
            <Tree selectionChange="onAppointmentPopoverItemSelect" mode="SingleSelectMaster" items="{path: 'TreeAllocations>/'}">
                <StandardTreeItem type="{=${TreeAllocations>InacisSelectabletive} ? 'Active' : 'Inactive'}" title="{TreeAllocations>text}"/>
            </Tree>
            
            <!-- Save Button to appear in certain modes -->
            <HBox visible="{=${PopoverControl>/mode} === 'SELECTED'}" justifyContent="End" width="100%" class="sapUiTinyMarginTop">
                <Button text="Save"  />
            </HBox>
        </content>
    </ResponsivePopover>
</core:FragmentDefinition>